<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8" />
  <title>DigiHealth â€” Patient Dashboard</title>
</head>
<body>

<h2>Patient Dashboard</h2>

<nav>
  <ul>
    <li><a href="/profile/view.html">My Profile</a></li>
    <li><a href="/appointments/my.html">My Appointments</a></li>
    <li><a href="/records/patient_view.html">My Medical Records</a></li>
  </ul>
</nav>

<hr />

<section>
  <h3>My DigiHealth ID</h3>
  <p id="healthId">Loading...</p>
</section>

<hr />

<button id="logoutBtn">Logout</button>

<script type="module">
  import { requireAuth } from "/js/auth_guard.js";
  import { auth } from "/js/firebase.js";
  import { signOut } from
    "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

  // ðŸ” Guard: Patient (everyone has patient access)
  requireAuth(
    ["patient", "doctor", "clinic_manager", "assistant_manager", "representative"],
    async (profile) => {
      document.getElementById("healthId").innerText =
        profile.health_id_10 || "Not assigned";
    }
  );

  // Logout
  document.getElementById("logoutBtn").onclick = async () => {
    await signOut(auth);
    location.href = "/index.html";
  };
</script>

</body>
</html>
