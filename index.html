<!DOCTYPE html>
<html lang="bn">
<head><meta charset="UTF-8"><title>DigiHealth</title></head>
<body>
<div style="float:right">
<select onchange="localStorage.setItem('lang',this.value);location.reload()">
  <option value="bn">বাংলা</option>
  <option value="en">English</option>
</select>
</div>
<h2 data-i18n="login">লগইন</h2>
<input id="email" data-i18n-placeholder="email" placeholder="ইমেইল">
<input id="password" type="password" data-i18n-placeholder="password" placeholder="পাসওয়ার্ড">
<button id="btn" data-i18n="login">লগইন</button>
<script type="module">
import { auth, db } from "./js/firebase.js";
import { signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
import { doc, getDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
import { applyLang } from "./js/lang.js";
applyLang();
document.getElementById("btn").onclick = async ()=>{
  const c = await signInWithEmailAndPassword(auth, email.value, password.value);
  const snap = await getDoc(doc(db,"users",c.user.uid));
  const r = snap.data().role_id;
  location.href = r==="admin"?"/admin.html":(r==="doctor"?"/doctor.html":"/patient.html");
};
</script>
</body>
</html>

